<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste LEX Agent - Simulador PJe</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f0f0f0;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #0066cc;
      border-bottom: 3px solid #0066cc;
      padding-bottom: 10px;
    }
    .info-box {
      background: #e8f4f8;
      border-left: 4px solid #0066cc;
      padding: 15px;
      margin: 20px 0;
    }
    .processo-info {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 4px;
      margin: 15px 0;
    }
    .processo-info strong {
      color: #333;
    }
    .instrucoes {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 20px 0;
    }
    .instrucoes ol {
      margin-left: 20px;
    }
    .instrucoes li {
      margin: 10px 0;
    }
    .code-box {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      overflow-x: auto;
      margin: 10px 0;
    }
    .success {
      color: #28a745;
      font-weight: bold;
    }
    .warning {
      color: #ffc107;
      font-weight: bold;
    }
    .error {
      color: #dc3545;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ§ª Teste LEX Agent - PÃ¡gina de Teste</h1>

    <div class="info-box">
      <strong>ğŸ“‹ Processo Simulado:</strong> 1234567-89.2024.8.14.0001<br>
      <strong>âš–ï¸ Classe:</strong> Procedimento Comum CÃ­vel<br>
      <strong>ğŸ“Œ Assunto:</strong> IndenizaÃ§Ã£o por Danos Morais<br>
      <strong>ğŸ‘¤ Autor:</strong> JoÃ£o da Silva<br>
      <strong>ğŸ‘¤ RÃ©u:</strong> Empresa XYZ Ltda<br>
      <strong>ğŸ›ï¸ Tribunal:</strong> TJPA - Tribunal de JustiÃ§a do ParÃ¡
    </div>

    <div class="instrucoes">
      <h2>ğŸ“– InstruÃ§Ãµes de Teste:</h2>
      <ol>
        <li><strong>Abra o Console do Desenvolvedor</strong>
          <ul>
            <li>Pressione <code>F12</code> no teclado</li>
            <li>Ou clique com botÃ£o direito â†’ "Inspecionar" â†’ aba "Console"</li>
          </ul>
        </li>

        <li><strong>Aguarde a conexÃ£o automÃ¡tica</strong>
          <ul>
            <li>A LEX deve conectar automaticamente ao backend</li>
            <li>Aguarde 2-3 segundos</li>
          </ul>
        </li>

        <li><strong>Verifique as mensagens no Console</strong>
          <ul>
            <li>Deve aparecer: <span class="success">"âœ… Conectado ao LEX Agent Backend"</span></li>
            <li>E tambÃ©m: <span class="success">"ğŸ”‘ Session ID: session_..."</span></li>
          </ul>
        </li>

        <li><strong>Teste 1: Verificar Status</strong><br>
          Cole no console e aperte Enter:
          <div class="code-box">window.lexAgentConnector.getStatus()</div>
          <strong>Resultado esperado:</strong> Objeto com <code>connected: true</code>
        </li>

        <li><strong>Teste 2: Enviar Comando</strong><br>
          Cole no console e aperte Enter:
          <div class="code-box">window.lexAgentConnector.executeCommand('protocolar petiÃ§Ã£o')</div>
          <strong>Resultado esperado:</strong> Mensagens de envio e recebimento de plano
        </li>

        <li><strong>Teste 3: Aprovar ExecuÃ§Ã£o</strong><br>
          Cole no console e aperte Enter:
          <div class="code-box">window.lexAgentConnector.approveAction('plan_123')</div>
          <strong>Resultado esperado:</strong> Progresso de execuÃ§Ã£o (0% â†’ 100%)
        </li>
      </ol>
    </div>

    <div class="processo-info">
      <h3>âœ… O que vocÃª deve ver no Console:</h3>
      <div class="code-box">
ğŸ”Œ LexAgentConnector inicializado
âœ… LexAgentConnector carregado
ğŸ”Œ Tentando conectar ao LEX Agent Backend...
ğŸ”Œ Conectando ao backend: ws://localhost:3000
âœ… Conectado ao LEX Agent Backend
ğŸ”‘ Session ID: session_1728...
ğŸ“¤ Sincronizando contexto com backend...
ğŸ“¨ Mensagem do backend: context_updated
âœ… Contexto sincronizado com backend
      </div>
    </div>

    <div class="info-box">
      <strong>ğŸ’¡ Dica:</strong> Se a conexÃ£o nÃ£o acontecer automaticamente apÃ³s 5 segundos, digite no console:<br>
      <div class="code-box">window.lexAgentConnector.connect()</div>
    </div>

    <div class="processo-info">
      <h3>ğŸ› Se algo der errado:</h3>
      <ul>
        <li><span class="error">Erro:</span> "WebSocket connection failed"<br>
          â†’ Verifique se o backend estÃ¡ rodando (terminal deve mostrar mensagens)</li>

        <li><span class="warning">Aviso:</span> Nenhuma mensagem aparece<br>
          â†’ Recarregue a extensÃ£o em chrome://extensions e recarregue esta pÃ¡gina</li>

        <li><span class="error">Erro:</span> "lexAgentConnector is not defined"<br>
          â†’ A extensÃ£o nÃ£o foi carregada. Verifique se estÃ¡ ativada e recarregue a pÃ¡gina</li>
      </ul>
    </div>

    <div class="info-box" style="background: #d4edda; border-color: #28a745;">
      <strong style="color: #155724;">âœ… Teste bem-sucedido se vocÃª viu:</strong>
      <ul>
        <li>âœ… Mensagem de conexÃ£o estabelecida</li>
        <li>âœ… Session ID gerado</li>
        <li>âœ… <code>getStatus()</code> retorna <code>connected: true</code></li>
        <li>âœ… Comando enviado e plano recebido</li>
        <li>âœ… Progresso de execuÃ§Ã£o (20%, 40%, 60%, etc)</li>
      </ul>
    </div>
  </div>

  <!-- Simular estrutura do PJe para a extensÃ£o detectar -->
  <div style="display: none;">
    <span>Processo: 1234567-89.2024.8.14.0001</span>
  </div>
</body>
</html>
