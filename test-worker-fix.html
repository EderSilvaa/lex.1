<!DOCTYPE html>
<html>
<head>
    <title>Teste Worker PDF.js - LEX</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>Teste de Configuração do Worker PDF.js</h1>
    <div id="status">Carregando...</div>
    <div id="results"></div>
    
    <script src="src/js/pdf.min.js"></script>
    <script src="src/js/pdf-processor.js"></script>
    
    <script>
        async function testWorkerConfiguration() {
            const statusDiv = document.getElementById('status');
            const resultsDiv = document.getElementById('results');
            
            try {
                statusDiv.innerHTML = 'Inicializando PDFProcessor...';
                
                const processor = new PDFProcessor();
                
                statusDiv.innerHTML = 'Testando configuração do worker...';
                
                const testResult = await processor.testWorkerConfiguration();
                
                statusDiv.innerHTML = testResult.success ? 
                    '✅ Teste bem-sucedido!' : 
                    '❌ Teste falhou';
                
                resultsDiv.innerHTML = `
                    <h2>Resultados do Teste:</h2>
                    <pre>${JSON.stringify(testResult, null, 2)}</pre>
                `;
                
                console.log('Resultado do teste:', testResult);
                
            } catch (error) {
                statusDiv.innerHTML = '❌ Erro durante o teste';
                resultsDiv.innerHTML = `
                    <h2>Erro:</h2>
                    <pre style="color: red;">${error.message}</pre>
                `;
                console.error('Erro no teste:', error);
            }
        }
        
        // Executar teste quando a página carregar
        window.addEventListener('load', testWorkerConfiguration);
    </script>
</body>
</html>